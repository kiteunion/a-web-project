<form #myForm="ngForm" (ngSubmit)="next(myForm)" (change)="formService.save()">
    <div class="grid">
        <div class="col-6">
            <p-card>
                <p-fieldset legend="Contact info">

                    <div class="field">
                        <p-iftalabel>
                            <input
                                #name="ngModel" [(ngModel)]="formData.contact.firstName" name="name"
                                class="ng-dirty w-full"
                                placeholder="" pSize="large" required pInputText id="field_1"/>
                            <label for="field_1">Full name of payee</label>
                        </p-iftalabel>
                    </div>
                    <div class="field">
                        <p-iftalabel>
                            <input #email="ngModel" [(ngModel)]="formData.contact.email"
                                   name="email" type="email" email (ngModelChange)="formService.checkEmail(email)"
                                   class="ng-dirty w-full" placeholder="" pSize="large" pInputText id="field_8"/>
                            <label for="field_8">E-mail</label>
                        </p-iftalabel>
                        @if (formService.isValidField(email, myForm)) {
                            <p-message class="mt-2" severity="error" variant="simple" size="small">
                                E-mail is required
                            </p-message>
                        }

                        @if (email.invalid && email.touched && email.errors?.['email']) {
                            <p-message class="mt-2" severity="error" variant="simple" size="small">
                                Please enter a valid E-mail
                            </p-message>
                        }
                    </div>
                </p-fieldset>
                <div class="mb-3"></div>
                <p-fieldset legend="Extras">
                    <h4 class="mb-2 mt-0">Would you like to add to your order ?</h4>
                    <div class="mb-3 text-gray-500">
                        <small>
                            The trademark application takes up to 8 months to complete.
                            <br><br>
                            A standard application is examined around the 4 month mark. If you wish to expedite the
                            examination time, you can expedite your application to be examined within 14 working days.
                        </small>
                    </div>
                    <div class="field mb-2 flex items-center gap-1">
                        <p-checkbox #expedited="ngModel" [binary]="true" (ngModelChange)="onChangeExpedited()"
                                    [(ngModel)]="formService.formData.isExpedite" name="expedited"
                                    class="ng-dirty" [value]="true" inputId="expedited"/>
                        <label for="expedited" class="ml-2">
                            Yes, expedite the examination period for my application
                            <i [pTooltip]="tooltipExpedited" tooltipStyleClass="tooltip-wide"
                               class="pi pi-info-circle mr-2"></i>
                        </label>
                    </div>

                    <div class="mb-3 text-gray-500">
                        <small>
                            Privacy option
                        </small>
                    </div>
                    <div class="field mb-0 flex items-center gap-1">
                        <p-checkbox #privacy="ngModel" [binary]="true" [(ngModel)]="formService.formData.isPrivate"
                                    name="privacy"
                                    class="ng-dirty" [value]="true" inputId="privacy"/>
                        <label for="privacy" class="ml-2">
                            Yes, I would like my address to be private
                            <i pTooltip="Correspondence will be directed to PO BOX 20015, World Square, NSW 2002"
                               tooltipStyleClass="tooltip-wide"
                               class="pi pi-info-circle mr-2"></i>
                        </label>
                    </div>
                </p-fieldset>
                <!--<div class="mb-3 text-gray-500">
                </div>-->

                <ng-template #footer>
                </ng-template>
            </p-card>
        </div>
        <div class="col-6">
            <p-card class="p-card-colored p-card-green text-color-secondary">
                <ng-template #header>
                    <h3 class="m-0">
                        <div class="grid justify-content-between align-items-center">
                            <div class="col py-0">
                                <i class="pi pi-shopping-bag pi-x2 mr-2"></i>
                                Order summary
                            </div>
                            <!--<div [@numberChange]="cartCount" class="col-fixed py-0">
                                {{ cartCount }} items
                            </div>-->
                        </div>
                    </h3>
                </ng-template>

                <app-form-order-summary></app-form-order-summary>
                <p-divider></p-divider>
                <app-form-order-total></app-form-order-total>
            </p-card>
        </div>

        <div class="col-12">
            <div class="flex gap-4 mt-1 align-items-center">
                <p-button
                        (click)="onBack.emit()"
                        type="button" size="large" label="Back" icon="pi pi-angle-left"
                        [raised]="true" severity="secondary" class="w-full" [outlined]="true" styleClass="w-full"/>
                <p-button [fluid]="true" [loading]="isLoading()" type="submit"
                          severity="primary" class="w-full" size="large" label="Checkout now" icon="pi pi-wallet"/>
            </div>
        </div>
    </div>
</form>