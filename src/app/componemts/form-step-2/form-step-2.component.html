<div class="grid">
  <div class="col-6">
    <p-card class="h-100 p-card-colored p-card-gray p-card-table">
      <ng-template #header>
        <p-floatlabel variant="on">
          <p-iconfield>
            <p-inputicon class="pi pi-search"/>
            <input class="w-full" pInputText id="on_label" [(ngModel)]="formService.q" (ngModelChange)="isLoading.set(true)" autocomplete="off"/>
            <p-inputicon *ngIf="isLoading()" class="">
              <p-progress-spinner strokeWidth="4" fill="transparent" animationDuration=".5s"
                                  [style]="{ width: '20px', height: '20px' }"/>
            </p-inputicon>

          </p-iconfield>
          <label for="on_label">Search</label>
        </p-floatlabel>
      </ng-template>
        @if (productService.sourceProducts().length == 0) {
            <div class="text-sm px-3">
                <p class="mb-1"><b>Choosing the correct protection trade mark class (es)</b></p>

                <div><b>What is this brand promoted as?</b></div>
                <ul class="mt-2">
                    <li>Is it a product? example: WHOPPER (hamburger)</li>
                    <li>Is it a service? example: HUNGRY JACK'S (restaurant services)</li>
                </ul>


                <p>You may need more than 1 protection class depending on your service.</p>
            </div>
        }
      <app-table-source-products (onLoad)="onLoaded()" [isLoading]="isLoading" [q]="formService.q"></app-table-source-products>
    </p-card>

  </div>
  <div class="col-6">
    <p-card class="p-card-colored p-card-blue p-card-table" header="">
      <ng-template #header>
        <h3 class="m-0">
          <div class="grid justify-content-between align-items-center">
            <div class="col">
              <i class="pi pi-shopping-bag pi-x2 mr-2"></i>
              {{productService.targetProducts.length}} Classes
            </div>
            <div class="col">
              <!--26 items-->
            </div>

            <div class="col-fixed">
              <i [pTooltip]="tooltipContent" tooltipPosition="top" class="pi pi-info-circle pi-x2 mr-2"></i>
              <ng-template #tooltipContent>
                  <div *ngFor="let clas of productService.targetProducts" class="mb-1">{{clas.name}}: {{formService.fees()?.classFee | currency : 'AUD' :'symbol' : '1.0-0'}}</div>
                  <div class="font-bold">Total: {{totalPrice() | currency : 'AUD' :'symbol' : '1.0-0'}}</div>
              </ng-template>
              <b>{{totalPrice() | currency : 'AUD' :'symbol' : '1.0-0'}}</b>
            </div>
          </div>
        </h3>
      </ng-template>
      <app-table-target-products></app-table-target-products>
    </p-card>
  </div>
</div>

    <div class="flex gap-4 mt-1">
      <p-button
        (click)="onBack.emit()"
        type="button" size="large" label="Back" icon="pi pi-angle-left"
        [raised]="true" severity="secondary" class="w-full" [outlined]="true" styleClass="w-full"/>
      <p-button
        (click)="next()" [loading]="isLoading()"
        type="button" size="large" label="Next" icon="pi pi-angle-double-right"
        [raised]="true" severity="success" class="w-full" styleClass="w-full"/>
    </div>


